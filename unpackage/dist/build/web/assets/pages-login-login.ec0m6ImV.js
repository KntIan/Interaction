import{r as a,o as e,s,w as l,c as A,a as o,i as t,b as c,d as n,e as r,f as i,n as u,t as g,g as p,h as d,j as m,k as f,l as I,m as v,I as R,p as U,q as b}from"./index-B-dpguDl.js";import{_ as y}from"./Frame.DjTFjFmC.js";import{_ as E,g as Q,c as V,l as w,s as x}from"./_plugin-vue_export-helper.q9aTn_51.js";const S=E({__name:"login",setup(E){const S=a(""),h=a(""),k=a(!1),B=a(60);let N=null;const C=(a,e="none")=>{b({title:a,icon:e})},K=async()=>{if(!/^[1][3-9][0-9]{9}$/.test(S.value))return C("手机号格式不正确");p({title:"发送中..."});try{const a=await x(S.value);k.value=!0,D(),C(a.msg,"success")}catch(a){C(res.msg,"error"),console.error("发送验证码错误:",a)}finally{f()}},D=()=>{B.value=60,clearInterval(N),N=setInterval((()=>{B.value--,B.value<=0&&(clearInterval(N),k.value=!1)}),1e3)},M=async()=>{if(!h.value)return C("请输入验证码");p({title:"登录中..."});try{const{token:a,company:e}=await w({mobile:S.value,captcha:h.value});C("登录成功","success"),console.log(a),console.log(e),e?m({url:"/pages/index/index"}):d({url:"/pages/information/information"}),a&&s({key:"token",data:a,success:()=>{console.log("Token存储成功")},fail:a=>{console.error("Token存储失败",a)}})}catch(a){C("登录失败，请重试","error"),console.error("登录错误:",a)}finally{f()}};return e((()=>{const a=Q("param");a&&s({key:"param",data:a,success:()=>console.log("param存储成功"),fail:a=>console.error("param存储失败",a)}),V()})),l(k,(a=>{a||clearInterval(N)})),(a,e)=>{const s=I,l=t,p=v,d=R,m=U;return c(),A(l,{class:"login-container"},{default:o((()=>[n(l,{class:"logo"},{default:o((()=>[n(s,{style:{width:"205px"},src:y,mode:"aspectFit"})])),_:1}),n(l,{class:"input-group"},{default:o((()=>[n(l,{class:"input-container"},{default:o((()=>[n(s,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAaRJREFUSEvtlb9rVEEQx7/f5Q5/BK64UgtPcm2Oe/MQsZBoIQbtxM78A+kiYidi6x8gpNJaLBI7CwUjEUSY3ccVQuAawcLG5gKJcnc7unCKmJe7Z6HVbTXLzu5n+M7sDPGPF6e8XxORGyTPAzhZ5hdj3Ce5471/DiCW+ZQC2u12o9FovCDZNbM3JA/M7ArJhckjewBeTcAXzew9yWuquv8npBQgIo9IrgyHw+Ver/cpXep2u+dqtdqpZI9Go49FURTJ7nQ6Z+v1+jaAZ6p6pxIgz/MvMca7IYTHVVKUZdkayXve+9NVARZjvBRCSJHNXCJy9YecW6p6Yg4olWsu0byKDiuQ5/n8o/2SpbSb/heJxuPx5aIoXs+sUQAiskJy82+a3ecY44MQwsZPgIg8SQNosn+nqmu/na0DuO29P1Opm4rIQwCraYqFED6kS1mW3QSwmGzn3K6qbiVbRDoAXpLcUNX7lQCtVut4s9l8SvI6gJ6ZfTtCqtT/lwBsDgaDW/1+/5DftKGfol52zl0ws2NlADP76px7q6o7R+VqKqBKgmf5fAf39iMocFbmPgAAAABJRU5ErkJggg==",class:"icon",mode:"aspectFit"}),n(p,{class:"country-code"},{default:o((()=>[r("+86")])),_:1}),n(s,{style:{width:"12px",height:"12px","margin-right":"12px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAKRJREFUKFNjZCARMJKonoE8DXp6etycnJzMJ0+e/ITNRpA8ExMT64ULFz6AbTA0NIxgYmKqYmBgcDp79uwbZE26urqCrKysexgYGOafO3duCtxJRkZG9YyMjMHImmCKGRkZT549ezabgYHhP4ofkDX9+vXrL8hkZMUgmzE8DdP0////3+iKsWoACRobG1f+//9f8Ny5c+UgZyD7ibxgJSXySLYBAHfVOg1yPufwAAAAAElFTkSuQmCC",mode:"aspectFit"}),n(d,{class:"input-field",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=a=>S.value=a),type:"text",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),n(l,{style:{height:"38px"},class:"input-container"},{default:o((()=>[n(s,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAr5JREFUSEvVlU1oE0EUx9+b2YRQNShBqKAQoWhZ02Q3qwc9WAVBe6peiiIKgiIIhVIEURBPQgVLL6IIShUvtiJY9aDiwQ8Q0c5sEpNDJELAg17qISUYSmafjKSyrTFZiz04sLDMe/P/vXm8Nw9hmRf+pb72158X9FxggGVZccbYdQAIKaUGs9lsIQikLSCRSGwIh8PDiHiSiBgiEgAYRDRer9dHc7lcsRVoAaC7uzvW0dFhep63inNuElEfIvY2hKeI6BwiVonoEgAMNITfAMAjpVSGc/4dEUtCiC/z0AUAy7L6OecPfBF99TxvkjF2QwjxwR9pMpncaBjGKUQ8CADrfwki7p+enp5qCfA877xS6l4ul/sIADolLVcqldrEGDvAGBvBIAAi2ielfNpO2G+3bbuXMfbi/wF0dXVFo9HobQC4K6Wc+Kc3aIg/A4BtRDTguu79JQFs216LiDeVUhey2ayrc+4XB4DjUspxvb8kgOM46wAgrwXq9fqearX6KRqN/ozcL75kgD6YSqVswzCe638iKgOAtVg8MMC27a2MsfcAcFYIMTJfhvMQIlrdTFz7pdPpIUQcI6LtUsq3TRtNbzqOI4mos1qtbi4Wi7N+CGMs4bruncX9YZrmykgkUkDEWSFEj785f3vs0un0XkR8QkRXpJSDQZrNcZxRABj2PK/fdd2H/jNNX1PHcXR9HyWiY1LKW60gtm0fQUTtPyGlPLTYtykgmUyuMAzjpa4+RBwUQlxtBrEs6wTn/BoRZSuVyu5SqVQJBNBOPT09a0Kh0GNE3EFEk3Nzc6fz+fxnbTNNszMSiVxGxMMA8K5Wq/UVCoVvzYJoOXDi8XgkFotdJKIh3QoA8EqPS0TcSURhRLwyMzNzplwu1/6UxrYTrdELWzjneqrtaszk10qpsUwmk2lXBIEA7URa2Zcd8APIG2soTu5R4AAAAABJRU5ErkJggg==",class:"icon",mode:"aspectFit"}),n(d,{class:"input-field",modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=a=>h.value=a),type:"text",placeholder:"请输入验证码"},null,8,["modelValue"]),n(l,{onClick:i(K,["stop"]),disabled:k.value,class:u({"code-button":!0,"disabled-button":k.value})},{default:o((()=>[r(g(k.value?`${B.value}秒`:"获取验证码"),1)])),_:1},8,["disabled","class"])])),_:1})])),_:1}),n(m,{onClick:M,class:"login-button"},{default:o((()=>[r(" 登    录 ")])),_:1})])),_:1})}}},[["__scopeId","data-v-a56b1fb2"]]);export{S as default};
