import{r as e,o as a,E as l,c as s,a as o,i as r,b as t,d as u,y as n,z as c,F as i,e as d,q as m,j as p,p as f,n as v,t as k,m as b,I as y}from"./index-B-dpguDl.js";import{_ as h,d as _}from"./_plugin-vue_export-helper.q9aTn_51.js";const g=h({__name:"information",setup(h){const g=e([{label:"姓名",key:"nickname",value:"",placeholder:"请输入"},{label:"电话",key:"mobile",value:"",placeholder:"请输入"},{label:"公司",key:"company",value:"",placeholder:"请输入"},{label:"职位",key:"position",value:"",placeholder:"请输入"},{label:"地址",key:"address",value:"",placeholder:"请输入"}]),$=async()=>{try{const e=[];if(!g.value.every((a=>{let l=!1;switch(a.key){case"nickname":l=/^[\u4e00-\u9fa5]{2,4}$/.test(a.value),l||e.push("姓名必须为2到4个汉字");break;case"company":l=/^[\u4e00-\u9fa5]{4,15}$/.test(a.value),l||e.push("公司名必须为4到15个汉字");break;case"position":l=/^[\u4e00-\u9fa5]{2,5}$/.test(a.value),l||e.push("职位必须为2到5个汉字");break;default:l=!0}return l})))return void m({title:e.join(", "),icon:"error",mask:!0});if(!g.value.every((e=>""!==e.value.trim())))return void m({title:"请填写所有字段",icon:"error",mask:!0});const a=Object.fromEntries(g.value.map((e=>[e.key,e.value]))),l=await _(a);console.log("信息已保存",l),0===l.code?m({title:l.msg,icon:"error",mask:!0}):p({url:"/pages/index/index"})}catch(e){console.error("提交信息时发生错误:",e.message),m({title:"提交信息失败，请重试",icon:"error",mask:!0})}};return a((()=>{l({key:"userInfo",success:e=>{const{mobile:a}=JSON.parse(e.data),l=g.value.find((e=>"电话"===e.label));l&&(l.value=a||"")},fail:()=>{console.log("未找到用户信息")}})})),(e,a)=>{const l=b,p=y,h=r,_=f;return t(),s(h,{class:"container"},{default:o((()=>[u(h,{class:"information_box"},{default:o((()=>[(t(!0),n(i,null,c(g.value,((e,a)=>(t(),s(h,{class:v(["info-item",{"last-item":a===g.value.length-1}]),key:a},{default:o((()=>[u(l,null,{default:o((()=>[d(k(e.label),1)])),_:2},1024),u(p,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:e.placeholder,type:"text",onBlur:a=>((e,a)=>{const l=e.detail.value;a.value=l;let s=!1;switch(a.errorMessage="",a.key){case"nickname":s=/^[\u4e00-\u9fa5]{2,4}$/.test(l),a.errorMessage=s?"":"姓名必须为2到4个汉字";break;case"company":s=/^[\u4e00-\u9fa5]{4,15}$/.test(l),a.errorMessage=s?"":"公司名必须为4到15个汉字";break;case"position":s=/^[\u4e00-\u9fa5]{2,5}$/.test(l),a.errorMessage=s?"":"职位必须为2到5个汉字";break;default:s=!0}console.log(`Item: ${a.label} | Value: '${l}' | IsValid: ${s}`),s||m({title:a.errorMessage,icon:"error",mask:!0})})(a,e),disabled:"mobile"===e.key},null,8,["modelValue","onUpdate:modelValue","placeholder","onBlur","disabled"])])),_:2},1032,["class"])))),128))])),_:1}),u(h,{class:"footer"},{default:o((()=>[u(_,{onClick:$},{default:o((()=>[d("保存")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-2f291500"]]);export{g as default};
